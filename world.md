# World Spec 模板说明（详细版）

`WorldEngine` 默认读取 `world/world_spec.md` 作为宏观模板。本文件提供模板格式说明、解析规则与编写建议，帮助你定制宏观维度结构。

## 使用方式
- 编辑 `world/world_spec.md` 以调整世界生成的宏观维度与提示文本。
- 也可在初始化 `WorldEngine` 时传入 `world_spec_text` 进行动态覆盖。
- 修改模板会直接影响生成的 `macro` 节点结构与内容。

## 解析规则
- 以“第X维度”开头的行会被解析为 **宏观一级节点**（ID 为数字，如 `1`、`2`）。
- 以 `1.1 标题` 这种“数字+标题”格式的行会被解析为 **子节点**。
- 非标题行会被当作 **提示文本（hint）**，附加到最近的节点，用于 LLM 生成上下文。

## 编写建议
- **避免提示行以数字开头**，否则会被误识为节点。
- 每个节点应包含 1-3 行“提示文本”，给出内容方向、边界与风格要求。
- 不建议在模板内写具体剧情或命名实体，保持模板的可复用性。
- 若需要新增维度，按 `第七维度` / `7.1` 的格式继续扩展即可。

## 默认模板（可直接复制）
```
第一维度：世界基石 (World Foundation)
决定世界的总体运行逻辑
- 描述世界的基本运行规则，回答“为什么这个世界能这样存在”。
- 指定科技/魔法/神话等体系的边界与共识。

1.1 核心设定
世界由哪些最基本的假设构成？（科技/魔法/神话/模拟等）
- 说明世界的主导力量来源（科技、魔法、神权、模拟等）。
- 描述与现实世界最明显的差异点。
- 是否存在超自然实体或不可证伪的现象。

1.2 绝对法则
世界中不可违背的底线是什么？（生命、能量、因果等）
- 生命是否可逆、能量是否守恒、因果是否不可逆。
- 违反法则的后果与代价。
- 这些法则如何影响社会与文明。

1.3 代价与限制
力量或资源的使用代价与极限是什么？
- 核心资源的稀缺性、获取条件与代价。
- 技术/魔法的使用限制与风险。
- 是否存在周期性枯竭或崩溃机制。

第二维度：空间与舞台 (World Stage)
决定世界的总体样貌与边界
- 描述地理结构、空间层次与通行方式。
- 明确探索边界与未知领域。

2.1 世界形态
世界是行星、群岛、位面、巨构，还是其他结构？
- 世界的整体形态（球体、空岛、层状世界等）。
- 与形态对应的交通或跨区机制。

2.2 主要地貌
最典型的环境是什么？（海洋/荒漠/都市/森林等）
- 主要生态与地貌类型。
- 地貌对文明发展方式的影响。

2.3 边界与未知
阻挡探索的边界或未知区域是什么？
- 物理障碍或政治/宗教禁区。
- 未知区域的危险与传闻。

第三维度：文明与历史 (Civilization & History)
决定世界的时代感与厚度
- 说明文明发展阶段与历史分期。
- 体现世界观的历史“惯性”。

3.1 文明阶段
整体处于原始、扩张、繁荣还是衰退？
- 说明生产力与社会组织形态。
- 是否存在跨区域霸权或文明断层。

3.2 历史关键点
决定现状的历史事件是什么？
- 描述影响当下格局的重大事件。
- 明确事件的时间远近与传播方式。

3.3 遗产与创伤
这些事件留下的遗产与伤痕是什么？
- 文化禁忌、历史创伤与技术遗产。
- 世界现状中的长期影响。

第四维度：权力与结构 (Power & Structure)
决定统治秩序与冲突来源
- 描述权力分配、统治方式与制度结构。
- 指出冲突来源与权力博弈点。

4.1 主导势力
谁在掌权？如何维持统治？
- 统治者/组织的合法性来源。
- 统治工具（军力、宗教、经济、技术）。

4.2 对立力量
反对者或挑战者是谁？他们的诉求是什么？
- 反对力量的目标、资源与手段。
- 与主导势力的核心矛盾。

4.3 资源与分配
最稀缺的资源是什么？社会如何分配？
- 稀缺资源及其控制方式。
- 分配制度与受益/受损群体。

第五维度：文化与日常 (Culture & Daily Life)
决定世界的氛围与真实感
- 展现社会价值观与生活方式。
- 描述普通人的日常体验。

5.1 核心价值观
世界普遍崇尚或畏惧的是什么？
- 群体价值观（秩序、自由、忠诚、牺牲等）。
- 禁忌或普遍恐惧的对象。

5.2 日常生活
人们如何生活、工作、娱乐与交流？
- 服饰、饮食、交通、娱乐与信息传播方式。
- 典型职业与社会分工。

5.3 禁忌与仪式
有哪些共同的禁忌、仪式或传统塑造行为？
- 日常禁忌与公共仪式。
- 与资源、神话或历史事件相关的习俗。

第六维度：主题与冲突 (Themes & Conflicts)
决定世界的故事张力
- 描述主线冲突、次级矛盾与未来走向。
- 提供持续可扩展的剧情张力。

6.1 主线冲突
最核心的冲突是什么？
- 冲突双方与核心诉求。
- 冲突在世界尺度上的影响。

6.2 次级冲突
围绕主冲突产生的次级矛盾有哪些？
- 地区性冲突、阶层矛盾、技术伦理等。
- 可衍生的支线剧情。

6.3 未来走向
世界正在走向何种方向？
- 可能的演化趋势与风险。
- 若主线冲突持续，将导致的后果。
```

## 关联实现
- `world/world_engine.py`：解析模板并生成节点。
- `world/world_prompt.py`：宏观/微观提示词模板。
